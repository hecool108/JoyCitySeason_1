<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <title>悦球的引力</title>
    <meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="full-screen" content="true" />
    <meta name="screen-orientation" content="portrait" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="360-fullscreen" content="true" />
    <style>
        html, body {
            -ms-touch-action: none;
            background: #000000;
            padding: 0;
            border: 0;
            margin: 0;
            height: 100%;
        }
    </style>

<!--这个标签为通过egret提供的第三方库的方式生成的 javascript 文件。删除 modules_files 标签后，库文件加载列表将不会变化，请谨慎操作！-->
<!--modules_files_start-->
	<script egret="lib" src="libs/modules/egret/egret.min.js"></script>
	<script egret="lib" src="libs/modules/egret/egret.web.min.js"></script>
	<script egret="lib" src="libs/modules/game/game.min.js"></script>
	<script egret="lib" src="libs/modules/game/game.web.min.js"></script>
	<script egret="lib" src="libs/modules/res/res.min.js"></script>
	<script egret="lib" src="libs/modules/tween/tween.min.js"></script>
	<script egret="lib" src="libs/modules/p2/p2.min.js"></script>
	<script egret="lib" src="libs/modules/jsb/jsb.min.js"></script>
	<!--modules_files_end-->

<!--这个标签为不通过egret提供的第三方库的方式使用的 javascript 文件，请将这些文件放在libs下，但不要放在modules下面。-->
<!--other_libs_files_start-->
<script egret="lib" src="libs/jquery.js"></script>
<script egret="lib" src="libs/jweixin-1.0.0.js"></script>
<!--other_libs_files_end-->

<!--这个标签会被替换为项目中所有的 javascript 文件。删除 game_files 标签后，项目文件加载列表将不会变化，请谨慎操作！-->
<!--game_files_start-->
	<script src="main.min.js"></script>
	<!--game_files_end-->
</head>

<body>

    <div style="margin: auto;width: 100%;height: 100%;" class="egret-player" data-entry-class="Main" data-orientation="auto" 
    data-scale-mode="showAll" data-frame-rate="60" data-content-width="640"
data-content-height="1038" data-show-paint-rect="false" data-multi-fingered="2" data-show-fps="false" data-show-log="false"
data-show-fps-style="x:0,y:0,size:12,textColor:0xffffff,bgAlpha:0.9">
</div>
<audio id="bgmusic" src="resource/assets/bgm.mp3" autoplay preload loop controls></audio>
<script>
    egret.runEgret({ renderMode: "canvas", audioType: 0 });

	var linktitle = '悦动星球';
	var linkdesc = '抢先开启大悦城4月22日的疯抢之旅';
	var linkurl ='https://wx.lnds.rockcms.com/activity/joycity/index.html';
	var linkimg ='https://lnds-wx.oss-cn-beijing.aliyuncs.com/activity/joycity/3ec5193a-56f3-483f-a24c-4e5227b47b73.jpg';
	var url = location.href.split('#')[0];
	$.ajax({
	    url: 'https://wx.lnds.rockcms.com/activity/common/wxjstoken.jsp',
	    dataType: 'jsonp',
	    data: {url:url,
	        rand:new Date().getTime()},
	    jsonp:'jsonpcallback',
	    cache: false,
	    beforeSend:function(){
	    },
	    success:function(data){
	        if(data && data.origin_status=="0"){
	            var signature = data.signature;
	            var nonceStr = data.nonceStr;
	            var timestamp = data.timestamp;
	            var appId = data.appId;
	            wx.config({
	                debug: false,
	                appId: appId,
	                timestamp:timestamp,
	                nonceStr: nonceStr,
	                signature: signature,
	                jsApiList: ['checkJsApi',
	                    'onMenuShareTimeline',
	                    'onMenuShareAppMessage']
	            });
	        }
	    }
	});

    // wx.config({
    //     debug: false,
    //     appId: '',
    //     timestamp: 1,
    //     nonceStr: '',
    //     signature: '',
    //     jsApiList: []
    // });

    // var linktitle = '抢先开启大悦城4月22日的疯抢之旅';
    // var linkdesc = '抢先开启大悦城4月22日的疯抢之旅';

    wx.ready(function () {
        document.getElementById('bgmusic').play();
        wx.hideMenuItems({
            menuList: [
                'menuItem:share:timeline',
                'menuItem:share:qq',
                'menuItem:share:weiboApp',
                'menuItem:favorite',
                'menuItem:share:facebook',
                'menuItem:share:QZone',
                'menuItem:copyUrl',
                'menuItem:exposeArticle',
                'menuItem:openWithQQBrowser',
                'menuItem:openWithSafari'
            ],
            success: function (res) {
            },
            fail: function (res) {
            }
        });
	    wx.onMenuShareAppMessage({
	        title: linktitle,
	        desc: linkdesc,
	        link: linkurl,
	        imgUrl:linkimg,
	        success: function () {
	        },
	        cancel: function () {
	        }
	    });

	    wx.onMenuShareTimeline({
	        title: linkdesc,
	        desc: linkdesc,
	        link: linkurl,
	        imgUrl:linkimg,
	        success: function () {
	        },
	        cancel: function () {
	        }
	    });        
    });
</script>
</body>

</html>